<div class="overflow-x-auto flex flex-col p-10">
  
  <app-header-service 
        titlePage="En esta página, puedes listar y editar clientes con facilidad." 
        description="Gestiona de manera rápida y sencilla todos los datos relacionados con los clientes. 
        ¡Haz clic en cualquier usuario para empezar a editar!">
  </app-header-service>

  <div class="flex flex-row items-center justify-between w-full mb-4">
    <h2 class="font-bold text-3xl">
      Listado de Usuarios
    </h2>
    
    <div class="flex items-center space-x-2">
      <input 
        type="text" 
        placeholder="Buscar..." 
        class="w-[250px] px-4 py-2 border-2 border-gray-300 rounded-l-md focus:outline-none focus:border-gray-800 transition ease-in-out duration-300 shadow-md"
        [(ngModel)]="wordFilter"

      >
      <button 
        (click)="onSearch()" 
        class="px-4 py-2 bg-gray-900 hover:bg-gray-700 text-white rounded-r-md transition ease-in-out duration-300 shadow-md"
      >
        Buscar
      </button>
    </div>
  </div>
  
  <div class="overflow-x-auto w-full mb-6  shadow-lg">
    <table class="min-w-full ">
      <thead class="bg-gray-300 text-black">
        <tr>
          <th class="py-3 px-4 text-left font-semibold">Nombre</th>
          <th class="py-3 px-4 text-left font-semibold">Apellido</th>
          <th class="py-3 px-4 text-left font-semibold">Estado</th>
          <th class="py-3 px-4 text-left font-semibold">Correo Electrónico</th>
          <th class="py-3 px-4 text-left font-semibold">Rol</th>
          <th class="py-3 px-4 text-left font-semibold">Ciudad</th>
          <th class="py-3 px-4 text-left font-semibold">Direcciòn</th>
          <th class="py-3 px-4 text-left font-semibold">Teléfono</th>
          <th class="py-3 px-4 text-center font-semibold">Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let userData of filteredUsers" class="even:bg-gray-100 hover:bg-blue-50 transition-colors duration-300">
          <td class="py-3 px-4">{{ userData.user.name }}</td>
          <td class="py-3 px-4">{{ userData.user.last_name }}</td>
          <td class="py-3 px-4">
            <span [ngClass]="{'text-green-600 font-semibold': userData.user.state, 'text-red-600 font-semibold': !userData.user.state}">
              {{ userData.user.state ? "Activo" : "Desactivo" }}
            </span>
          </td>
          <td class="py-3 px-4">{{ userData.user.correo }}</td>
          <td class="py-3 px-4">{{ userData.user.rol }}</td>
          <td class="py-3 px-4">{{ userData.user.city }}</td>
          <td class="py-3 px-4">{{ userData.user.direction }}</td>
          <td class="py-3 px-4">{{ userData.user.phone }}</td>
          <td class="py-3 px-4 text-center">
            
            <button (click)="onClick(userData)" 
              class="font-medium text-gray-500 dark:text-gray-800 hover:underline">
              Seleccionar
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  
  <div *ngIf="user">
    <h2
      class="font-bold text-2xl mb-2">
      Listado de Contratos del Cliente
   </h2>

  <app-table-contract
    [userData]="user">
  </app-table-contract>
  
  <div class="w-full flex justify-center mb-6">
    <button 
      (click)="toggleEdit()" 
      class="px-10 font-semibold py-2 rounded-lg mt-5 text-white w-36"
      [ngClass]="{
        ' bg-gray-900 hover:bg-gray-700': !isEditing,
        ' bg-red-500 hover:bg-red-600': isEditing
      }"> 
      {{ isEditing ? 'Cancelar' : 'Editar' }}
    </button>
  </div>
  
  <div class="w-full flex justify-center mb-6">
    <app-update-form-user 
      [userData]="user"
      (updateTable)="initUser()"
      [isEditing]="isEditing">
    </app-update-form-user>
    
  </div>
  </div>
  
</div>
